import{d as N,z as f,I as U,l as E,a3 as b,o as k,f as R,w as l,b as e,u as r,J as w,a as V,a6 as _,h as C,E as F,a9 as S,C as B,ac as z,ad as L,D as M}from"./index-59vPsdGi.js";import{a as T,b as $,c as q,d as D,e as J,v as j}from"./validator-qMdRg1PI.js";const A=V("div",{class:"form-title"},[V("span",null,"注册")],-1),O=N({__name:"index",setup(G){let i=f(!1),g=U(),P=E(),m=f(),c=f(),o=b({username:"",password:"",confirmPassword:"",email:"",mobilePhoneNumber:"",shortId:"",sliderPass:!1}),y=b({username:[{required:!0,validator:T,trigger:"blur"}],password:[{validator:$,trigger:"blur"}],confirmPassword:[{validator:(p,a,t)=>{a===""?t(new Error("Please input the password again")):a!==o.password?t(new Error("Two inputs don't match!")):t()},trigger:"blur"}],email:[{validator:q,trigger:"blur"}],mobilePhoneNumber:[{validator:D,trigger:["blur","change"]}],shortId:[{validator:J,trigger:"blur"}],sliderPass:[{validator:j,trigger:"blur"}]});const h=async p=>{p&&await p.validate(a=>{a?(i.value=!0,P.userSignup(o).then(()=>{g.push("/account/login"),_({title:"注册成功",type:"success",message:"请登录"}),i.value=!1},t=>{_({title:"注册失败",type:"error",message:t}),i.value=!1,o.sliderPass=!1,m.value.reset()})):(_({title:"表单校验失败",type:"error"}),i.value=!1,o.sliderPass=!1,m.value.reset())})};return(p,a)=>{const t=C,d=F,u=S,n=B,x=z,v=L,I=M;return k(),R(I,{ref_key:"signupFormRef",ref:c,size:"large",model:r(o),rules:r(y)},{default:l(()=>[A,e(n,{prop:"username"},{default:l(()=>[e(u,{type:"text",modelValue:r(o).username,"onUpdate:modelValue":a[0]||(a[0]=s=>r(o).username=s),placeholder:"账号（必填）",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"User"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"password"},{default:l(()=>[e(u,{type:"password",modelValue:r(o).password,"onUpdate:modelValue":a[1]||(a[1]=s=>r(o).password=s),placeholder:"密码（必填）","show-password":"",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"Lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"confirmPassword"},{default:l(()=>[e(u,{type:"password",modelValue:r(o).confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=s=>r(o).confirmPassword=s),placeholder:"确认密码（必填）","show-password":"",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"Lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"email"},{default:l(()=>[e(u,{type:"email",modelValue:r(o).email,"onUpdate:modelValue":a[3]||(a[3]=s=>r(o).email=s),placeholder:"电子邮箱",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"Message"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"mobilePhoneNumber"},{default:l(()=>[e(u,{type:"tel",modelValue:r(o).mobilePhoneNumber,"onUpdate:modelValue":a[4]||(a[4]=s=>r(o).mobilePhoneNumber=s),placeholder:"手机号码",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"phone"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"shortId"},{default:l(()=>[e(u,{type:"text",modelValue:r(o).shortId,"onUpdate:modelValue":a[5]||(a[5]=s=>r(o).shortId=s),placeholder:"昵称（真实姓名）",clearable:""},{prefix:l(()=>[e(d,null,{default:l(()=>[e(t,{name:"nickName"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"sliderPass"},{default:l(()=>[e(x,{ref_key:"slideRef",ref:m,value:r(o).sliderPass,"onUpdate:value":a[6]||(a[6]=s=>r(o).sliderPass=s)},null,8,["value"])]),_:1}),e(n,null,{default:l(()=>[e(v,{class:"form-button",type:"primary",loading:r(i),onClick:a[7]||(a[7]=s=>h(r(c)))},{default:l(()=>[w(" 注 册 ")]),_:1},8,["loading"])]),_:1}),e(n,null,{default:l(()=>[e(v,{class:"form-button",onClick:a[8]||(a[8]=s=>r(g).push("/account/login"))},{default:l(()=>[w(" 登 录 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{O as default};
