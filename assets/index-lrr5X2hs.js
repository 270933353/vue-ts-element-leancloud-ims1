import{d as V,I as C,z as f,a3 as c,o as F,f as w,w as a,b as l,u as t,J as g,a as v,ag as B,a6 as m,h as I,E as N,a9 as U,C as q,ac as z,ad as $,D}from"./index-59vPsdGi.js";import{c as J,v as M}from"./validator-qMdRg1PI.js";const S=v("div",{class:"form-title"},[v("span",null,"重置密码")],-1),G=V({__name:"index",setup(T){let y=C(),o=f(!1),i=f(),_=f(),s=c({email:"",sliderPass:!1}),P=c({email:[{required:!0,message:"Please input email",trigger:"blur"},{validator:J,trigger:"blur"}],sliderPass:[{validator:M,trigger:"blur"}]});const b=u=>{u&&u.validate(async e=>{e?(o.value=!0,await B(s.email).then(()=>{m({title:"邮件发送成功",type:"success",message:"请重置密码"}),o.value=!1},d=>{m({title:"邮件发送失败",type:"error",message:d}),o.value=!1,s.sliderPass=!1,i.value.reset()})):(m({title:"表单校验失败",type:"error"}),o.value=!1,s.sliderPass=!1,i.value.reset())})};return(u,e)=>{const d=I,x=N,E=U,n=q,R=z,p=$,k=D;return F(),w(k,{ref_key:"forgetFormRef",ref:_,size:"large",model:t(s),rules:t(P)},{default:a(()=>[S,l(n,{prop:"email"},{default:a(()=>[l(E,{type:"text",modelValue:t(s).email,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).email=r),placeholder:"输入电子邮箱",clearable:""},{prefix:a(()=>[l(x,null,{default:a(()=>[l(d,{name:"Message"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{prop:"sliderPass"},{default:a(()=>[l(R,{ref_key:"slideRef",ref:i,value:t(s).sliderPass,"onUpdate:value":e[1]||(e[1]=r=>t(s).sliderPass=r)},null,8,["value"])]),_:1}),l(n,null,{default:a(()=>[l(p,{class:"form-button",type:"primary",loading:t(o),onClick:e[2]||(e[2]=r=>b(t(_)))},{default:a(()=>[g(" 发送重置密码的邮件 ")]),_:1},8,["loading"])]),_:1}),l(n,null,{default:a(()=>[l(p,{class:"form-button",onClick:e[3]||(e[3]=r=>t(y).push("/account/login"))},{default:a(()=>[g(" 登 录 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{G as default};
